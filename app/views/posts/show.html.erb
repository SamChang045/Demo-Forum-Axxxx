<div class="container">
  <div class="row border-bottom bg-light pt-5">
    <div class="col-sm-3">
      <h3>
        <strong><%= @post.title %></strong>
      </h3>
    </div>
    <div class="col-sm-3 offset-sm-6">
      <%= link_to "Comment", "#comments" ,class: "btn btn-sm btn-primary" %>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-3 border">
      <div class="user-item text-center mt-3 mb-3">
        <%= link_to user_path(@post.user_id), class: "nav-link" do %>
          <div class="avatar">
            <% if @post.user.avatar? %>
              <%= image_tag @post.user.avatar, width: "100%" %>
            <% else %>
              <%= fa_icon "user 5x" %>
            <% end %>
          </div>
          <p><strong><%= @post.user.name %></strong></p>
        <% end %>
      </div>
    </div>
    <div class="col-sm-9 border">
      <div class="image mt-3">
        <%= image_tag @post.image, width: "500px" if @post.image? %>
      </div>
      <div class="content-item w-100">
        <p><%= @post.content %></p>
        <div class="row">
          <div class="col-sm-2 offset-sm-10">
            <% if @post.user == current_user || current_user.admin? %>
              <div class="buttons">
                <%= link_to edit_post_path(@post), class: "p-2" do %>
                  <%= fa_icon "edit 2x" %>
                <% end %>
                <%= link_to post_path(@post), method: :delete, data: { confirm: "Are you sure to delete?" }, class: "p-2 text-danger" do %>
                  <%= fa_icon "window-close-o 2x" %>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
      </div>      
    </div>
  </div>

  <% @comments.each do |comment| %>
    <div class="row">
      <div class="col-sm-3 border">
        <div class="user-item text-center mt-3 mb-3">
          <%= link_to user_path(comment.user), class: "nav-link" do %>
            <div class="avatar">
              <% if comment.user.avatar? %>
                <%= image_tag comment.user.avatar, width: "100%" %>
              <% else %>
                <%= fa_icon "user 5x" %>
              <% end %>
            </div>
            <p><strong><%= comment.user.name %></strong></p>
          <% end %>
        </div>
      </div>
      <div class="col-sm-9 border">
        <div class="content-item w-100">
          <p><%= comment.content %></p>
          <div class="row">
            <div class="col-sm-2 offset-sm-10">
              <% if comment.user == current_user || current_user.admin? %>
                <div class="buttons">
                </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <div class="text-center">
    <%= paginate @comments %>
  </div>

  <div class="row" id="comments">
    <div class="col-sm-12 border">
      <%= form_for [@post, @comment] do |f| %>
        <div class="form-group">
          <%= f.text_area :content, placeholder: "Leave a message", class: "form-control mt-4 bg-light" %>
        </div>
        <div class="form-group">
          <%= f.submit class: "btn btn-primary btn-xs" %>
          <%= f.button "Cancel", type: :reset, class: "btn btn-danger btn-xs" %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="row bg-light">
  </div>

  <div class="row" id="comments">
    <div class="col-sm-12 border">
    </div>
  </div>
</div>